@*@RenderPage("~/Views/Shared/_Header.cshtml")
@RenderPage("~/Views/Shared/_SideBar.cshtml")*@
<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset='utf-8' />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Calendar Plugin</title>

    <link rel="stylesheet" href="/Content/calendar/css/calendar-plugin.min.css" media="all" />
</head>

<body>
    <!-- START PAGE-CONTAINER -->
    <div class="page-container">

        @*@RenderPage("~/Views/Shared/_NavBar.cshtml")*@

        <!-- START PAGE CONTENT WRAPPER -->
        <div class="page-content-wrapper">
            <!-- START PAGE CONTENT -->
            <div class="content">
                <!-- START JUMBOTRON -->
                <div class="jumbotron w-100" style="position: fixed; z-index: 400">
                    <div class="container-fluid container-fixed-lg">
                        <!-- <div class="inner"> -->
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h3>Activity Calendar</h3>
                            </div>
                        </div>
                        <!-- </div> -->
                    </div>
                </div>
                <!-- END JUMBOTRON -->
                <div style="height: 60px;"></div>
                <!-- START CONTAINER FLUID -->
                <div class="container-fluid container-fixed-lg">
                    <div style='position: relative; float: left; width: 100%;'>
                        <section id='calendar'></section>
                    </div>

                    <script src="~/Content/calendar/plugins/jquery/jquery.min.js"></script>
                    <!-- <script src="plugins/jquery-ui/jquery-ui.min.js"></script> -->
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.js"></script>
                    <script src="~/Content/calendar/js/calendar-plugin.js"></script>
                    <script type='text/javascript'>
                        var l_Categories = {};

                        $.ajax({
                            type: 'get',
                            url: '@Url.Action("getCategoriesForCalendar")',
                            dataType: 'json',
                            success: function (data) {
                                //l_Categories = data;
                              //console.log(data);

                                for (var i = 0; i < data.length; i++ ) {
                                    l_Categories[data[i].Id] = data[i].Name;
                                }
                                console.log(l_Categories);
                                initCalendar();
                            },
                            error: function (ex) {
                                var r = jQuery.parseJSON(response.responseText);
                                alert("Message: " + r.Message);
                                alert("StackTrace: " + r.StackTrace);
                                alert("ExceptionType: " + r.ExceptionType);
                            }
                        });



                        function initCalendar() {
                             $('#calendar').CalendarPlugin({
                                 url: '/Home/getEvents',
                                 view: 'daily',
                            form: [
                                [
                                    {
                                        type: 'text',
                                        name: 'title',
                                        label: 'Activity Display Title',
                                        placeholder: 'E.g. Marathon'
                                    }

                                ],
                                [
                                    {
                                        type: 'select',
                                        name: 'activity',
                                        label: 'Activity *',
                                        placeholder: 'Select',
                                        options: l_Categories
                                    }
                                ],
                                [
                                    {
                                        type: 'radio',
                                        name: 'frequency',
                                        label: 'Frequency',
                                        placeholder: 'Select',
                                        options: { 1: 'Date & Time', 2: 'Every Weekday'}
                                    }
                                ],
                                [
                                    {
                                        type: 'date',
                                        name: 'startDate',
                                        label: 'Date & Time',
                                        placeholder: 'DD/MM/YYYY',
                                    }
                                ],
                                [
                                    {
                                        type: 'select',
                                        name: 'weekDay',
                                        label: 'Week Day',
                                        placeholder: 'Select',
                                        options: { Monday: 'Monday', Tuesday: 'Tuesday', Wednesday: 'Wednesday', Thursday: 'Thursday', Friday: 'Friday', Saturday: 'Saturday', Sunday:'Sunday'}
                                    }
                                ],
                                [
                                    {
                                        type: 'select',
                                        name: 'venue',
                                        label: 'Venue',
                                        placeholder: 'Select',
                                        options: { 0:'NaN' }
                                    }
                                ]
                            ]
                        });
                        }
                    </script>
                </div>
                <!-- END CONTAINER FLUID -->
            </div>
            <!-- END PAGE CONTENT -->
</body>

</html>